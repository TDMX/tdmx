setup AccountZone in control-db

insert into Account(accountId) values('A1');

insert into AccountZone(zoneApex, accountId,segment,status,zonePartitionId)
  values ('zone.root' , 'A1', 'SEG-NORMAL', 'ACTIVE', 'P-001');


insert into DatabasePartition (
        partitionId, activationTimestamp, dbType, deactivationTimestamp, obfuscatedPassword,
        segment, sizeFactor, url, username )
 values (
       'P-001', now(), 'ZONE', null, 'dev',
       'SEG-NORMAL', 100, 'jdbc:mysql://localhost:3306/zone-001?autoReconnect=true', 'dev' );  

insert into DatabasePartition (
        partitionId, activationTimestamp, dbType, deactivationTimestamp, obfuscatedPassword,
        segment, sizeFactor, url, username )
 values (
       'P-002', now(), 'ZONE', null, 'dev',
       'SEG-NORMAL', 100, 'jdbc:mysql://localhost:3306/zone-002?autoReconnect=true', 'dev' );  

Apply to zonedb to remove control tables:
drop table account;
drop table accountzone;
drop table consoleuser;
drop table databasepartition;

insert into Zone ( zoneApex ) values ('zone.root');

insert into AgentCredential ( sha1fingerprint, zoneApex,credentialStatus, credentialType, certificateChainPem )
values ( 'a9f1f7919c9b4046e2a8a57ba034c6ce3afe8a3d', 'zone.root', 'ACTIVE', 'ZAC', '-----BEGIN CERTIFICATE-----
MIIEcjCCA1ygAwIBAgIBATALBgkqhkiG9w0BAQswfjELMAkGA1UEBhMCQ0gxDDAK
BgNVBAcMA1p1ZzESMBAGA1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEcMBoG
CSqGSIb3DQEJARYNcGprQGdtYWlsLmNvbTETMBEGA1UEFBMKMDQxNzEwMDAwMDEN
MAsGA1UEAwwEbmFtZTAeFw0xNTAxMjAyMTIzMjJaFw0yNTAxMjAyMTIzMjJaMH4x
CzAJBgNVBAYTAkNIMQwwCgYDVQQHDANadWcxEjAQBgNVBAoMCW15Y29tcGFueTEL
MAkGA1UECwwCSVQxHDAaBgkqhkiG9w0BCQEWDXBqa0BnbWFpbC5jb20xEzARBgNV
BBQTCjA0MTcxMDAwMDAxDTALBgNVBAMMBG5hbWUwggEiMA0GCSqGSIb3DQEBAQUA
A4IBDwAwggEKAoIBAQCYH6JpseN43SYTJtzClEyQvFokkiPw3moF33hOY3vpQctE
oBwxlsiDYd9udl/qCU61AtmpNVruel7ptBU/DQLmdtCri2HDU2Qf0Q9PwjKKCaqK
wwY2aQ4BKGH4/mucNH3p+Tka0N2AFSETpqNRif8JbiwLeSNeX9PCkDhT8BwId11j
K/dgyEjzTvsBsO2aq9cmrZMgGD+ldyXF7yAZ4iB+Wc4AHvhviDDW8P1k288HHxB8
XT+JVYwiiVXOlrX+FKmDbg/4KsWFtHfMXJEUz0Nb5XyEGtWMrPGaqli5WPBxI8ou
mTv1I4VZeYN2ynTFqKOEBzaVlDfQfPu6rW/xy12nAgMBAAGjgf4wgfswEgYDVR0T
AQH/BAgwBgEB/wIBATAfBgNVHSMEGDAWgBS6Qhs6zqeqxowKLnMoLrh1V2xSzjAd
BgNVHQ4EFgQUukIbOs6nqsaMCi5zKC64dVdsUs4wCwYDVR0PBAQDAgKEMGYGA1Ud
HgEB/wRcMFqgWDBWpFQwUjELMAkGA1UEBhMCQ0gxDDAKBgNVBAcMA1p1ZzESMBAG
A1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEUMBIGA1UECwwLdGRteC1kb21h
aW4wMAYIKgMEBQYHCAkEJDAiAgEBFgl6b25lLnJvb3QWEmh0dHBzOi8vbXJzVXJs
L2FwaTALBgkqhkiG9w0BAQsDggEBAE+2V6clObEzlUhpp5R9Od2McySjLIlnfSjS
sdhB+IbjGG/mmztyWPNk0j90B28SvfHKsSiKwkfuh2o412PnzNqCKqxoHpvTSMLV
tMOko+6EfGRHNQXHuKtcWs7ab893ouyc6j2udR1EZh10w5PJd0NdS1aLEEWhR1X5
3PDazxPDpe+DN3cyR/PSMW/fwz4ipqDKg+gcsiPsDJiUoGO6EqmakoEgCmNi2/Os
FQybTMQLFbQLDl0NPgpPiRZFeccSxUeY/l9T5vlz5PuT9Ba7i1YwM0kW8vulhIkR
AiczVGNDFLDACSSc07dx8o61OLOJ7uAsla3siPGlIfoJT7BT+00=
-----END CERTIFICATE-----'   );



uc/dac/zac.keystore created by KeyStoreUtilsTest#storeCreateClientKeystores
logge out using ClientAdapterFactoryIntegrationTest#test_LogZAC

19:26:42.977 [main] WARN  o.t.server.runtime.ServerContainer - zac-sha1: a9f1f7919c9b4046e2a8a57ba034c6ce3afe8a3d
19:26:42.983 [main] WARN  o.t.server.runtime.ServerContainer - -----BEGIN CERTIFICATE-----
MIIEcjCCA1ygAwIBAgIBATALBgkqhkiG9w0BAQswfjELMAkGA1UEBhMCQ0gxDDAK
BgNVBAcMA1p1ZzESMBAGA1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEcMBoG
CSqGSIb3DQEJARYNcGprQGdtYWlsLmNvbTETMBEGA1UEFBMKMDQxNzEwMDAwMDEN
MAsGA1UEAwwEbmFtZTAeFw0xNTAxMjAyMTIzMjJaFw0yNTAxMjAyMTIzMjJaMH4x
CzAJBgNVBAYTAkNIMQwwCgYDVQQHDANadWcxEjAQBgNVBAoMCW15Y29tcGFueTEL
MAkGA1UECwwCSVQxHDAaBgkqhkiG9w0BCQEWDXBqa0BnbWFpbC5jb20xEzARBgNV
BBQTCjA0MTcxMDAwMDAxDTALBgNVBAMMBG5hbWUwggEiMA0GCSqGSIb3DQEBAQUA
A4IBDwAwggEKAoIBAQCYH6JpseN43SYTJtzClEyQvFokkiPw3moF33hOY3vpQctE
oBwxlsiDYd9udl/qCU61AtmpNVruel7ptBU/DQLmdtCri2HDU2Qf0Q9PwjKKCaqK
wwY2aQ4BKGH4/mucNH3p+Tka0N2AFSETpqNRif8JbiwLeSNeX9PCkDhT8BwId11j
K/dgyEjzTvsBsO2aq9cmrZMgGD+ldyXF7yAZ4iB+Wc4AHvhviDDW8P1k288HHxB8
XT+JVYwiiVXOlrX+FKmDbg/4KsWFtHfMXJEUz0Nb5XyEGtWMrPGaqli5WPBxI8ou
mTv1I4VZeYN2ynTFqKOEBzaVlDfQfPu6rW/xy12nAgMBAAGjgf4wgfswEgYDVR0T
AQH/BAgwBgEB/wIBATAfBgNVHSMEGDAWgBS6Qhs6zqeqxowKLnMoLrh1V2xSzjAd
BgNVHQ4EFgQUukIbOs6nqsaMCi5zKC64dVdsUs4wCwYDVR0PBAQDAgKEMGYGA1Ud
HgEB/wRcMFqgWDBWpFQwUjELMAkGA1UEBhMCQ0gxDDAKBgNVBAcMA1p1ZzESMBAG
A1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEUMBIGA1UECwwLdGRteC1kb21h
aW4wMAYIKgMEBQYHCAkEJDAiAgEBFgl6b25lLnJvb3QWEmh0dHBzOi8vbXJzVXJs
L2FwaTALBgkqhkiG9w0BAQsDggEBAE+2V6clObEzlUhpp5R9Od2McySjLIlnfSjS
sdhB+IbjGG/mmztyWPNk0j90B28SvfHKsSiKwkfuh2o412PnzNqCKqxoHpvTSMLV
tMOko+6EfGRHNQXHuKtcWs7ab893ouyc6j2udR1EZh10w5PJd0NdS1aLEEWhR1X5
3PDazxPDpe+DN3cyR/PSMW/fwz4ipqDKg+gcsiPsDJiUoGO6EqmakoEgCmNi2/Os
FQybTMQLFbQLDl0NPgpPiRZFeccSxUeY/l9T5vlz5PuT9Ba7i1YwM0kW8vulhIkR
AiczVGNDFLDACSSc07dx8o61OLOJ7uAsla3siPGlIfoJT7BT+00=
-----END CERTIFICATE-----




 


select * from AgentCredential;

update AgentCredential set certificateChainPem = '-----BEGIN CERTIFICATE-----
MIID9DCCAt6gAwIBAgIBATALBgkqhkiG9w0BAQswcDELMAkGA1UEBhMCQ0gxDDAK
BgNVBAcMA1p1ZzESMBAGA1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEUMBIG
A1UECwwLdGRteC1kb21haW4xHDAaBgNVBAMME3N1YmRvbWFpbi56b25lLnJvb3Qw
HhcNMTUwMTA2MjEwNDUyWhcNMTYwMTA2MjEwNDUyWjCBhjELMAkGA1UEBhMCQ0gx
DDAKBgNVBAcMA1p1ZzESMBAGA1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEU
MBIGA1UECwwLdGRteC1kb21haW4xHDAaBgNVBAsME3N1YmRvbWFpbi56b25lLnJv
b3QxFDASBgNVBAMMC3VzZXJuYW1lMTIzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A
MIIBCgKCAQEAgRuVo4RFZ71JrmtOkZfmVTGcvmLVS5glhWYmr9NzQwhml9pmyP3t
PmHpUEWmx90brPypr/GtP6dSkNGFkhqds62KjuU1eGrSwK+5rrPz3EUUUamOn/mE
M1ePPrF7P46x0Jx+CEbn+YF/owzorq28IEOpYWk2GmGwBXM6Y2sdVo8dMOmPRuCh
I7JNCQD8/1TpjGc7JS+lGVxYN8H9VRriJczUH/uyYZAgTlmE3vOXgleE5bBtgv9W
dhUlWZ41y7NIL/CS+w3K+o4aS5jhCHH4Xfy0RORoQbYAKf1f/+maXh4UQ6RSqmYR
ZOp64Uce2ngodRiwEIJMN3BkoJjFwjFZzQIDAQABo4GFMIGCMB8GA1UdIwQYMBaA
FCDsQqmWWPf9sEikxBrRQJXYtnFhMB0GA1UdDgQWBBSfY/nJtAhjQoC/QizdGIW1
lF1gwzALBgNVHQ8EBAMCBeAwMwYIKgMEBQYHCAkBAf8EJDAiAgEBFgl6b25lLnJv
b3QWEmh0dHBzOi8vbXJzVXJsL2FwaTALBgkqhkiG9w0BAQsDggEBACJiXznS1Jho
M4gEIPJabFtAHKaiMdCIXVmieXYTgXLXYxO6hiS+pTp9I1/GSQdWknLUYg9FTVib
64C8BemSfKRmykkU4TnW4HgPQ27yxfV6O9k2jUoEDs75bHJahrkYIHYeZRYV0sYN
Ps9FTLbhq8x9wOQJ1E2C+T5Md+AjiDErJPbN3VFOYc55rCqaqA+bnFMEpJ3Eelka
ixIu8CcHDMqHI/OcDts2ZCkwaue8ufeTmpk8Atf4VbyXlWAKZi1G1jqdUSlxBcmG
Hn/FapFvPTfKB8IAG2BvkvbeDGWHlx4us5O8hhTk/yL9vqZGZfwNUn6v6aXfB5Bh
YY15G1dcid4=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEiDCCA3KgAwIBAgIBATALBgkqhkiG9w0BAQswfjELMAkGA1UEBhMCQ0gxDDAK
BgNVBAcMA1p1ZzESMBAGA1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEcMBoG
CSqGSIb3DQEJARYNcGprQGdtYWlsLmNvbTETMBEGA1UEFBMKMDQxNzEwMDAwMDEN
MAsGA1UEAwwEbmFtZTAeFw0xNTAxMDYyMTA0NTJaFw0xNzAxMDYyMTA0NTJaMHAx
CzAJBgNVBAYTAkNIMQwwCgYDVQQHDANadWcxEjAQBgNVBAoMCW15Y29tcGFueTEL
MAkGA1UECwwCSVQxFDASBgNVBAsMC3RkbXgtZG9tYWluMRwwGgYDVQQDDBNzdWJk
b21haW4uem9uZS5yb290MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
mvef6uUqO17mn0ZUZz12UFNK+meID0k+6eodB87lGUBCvag9YPLv4fGGkv2tpC9A
q52iadpT1QevPy50BBirvAb27a4FELc2dv/KM2No4cF7/bCUjM9rWibuNYgxWFIm
/ZNtAUxFW3jgopZsWA/IxD9zYbp/U/b378+2YxUmcOZuQwxga2hpusdM3mAGXw/I
iPAuh2O+rAHyvOf10q48dzCu12y1mCPQ9TWX8iirNNyZ6xBPolSB5P8hBHrhwCEW
3KnAKCQKG3ZqFK4IHNgrXenN9/tSgvNWX+uRu/nPMEpaEIb4m7IwZtZMCtcexnHP
QdlI8fNvlLmJqXmERTg/mQIDAQABo4IBITCCAR0wEgYDVR0TAQH/BAgwBgEB/wIB
ADAfBgNVHSMEGDAWgBSXvbdqANBzPW7lB1Q3fJcqpJbLuTAdBgNVHQ4EFgQUIOxC
qZZY9/2wSKTEGtFAldi2cWEwCwYDVR0PBAQDAgKEMIGEBgNVHR4BAf8EejB4oHYw
dKRyMHAxCzAJBgNVBAYTAkNIMQwwCgYDVQQHDANadWcxEjAQBgNVBAoMCW15Y29t
cGFueTELMAkGA1UECwwCSVQxFDASBgNVBAsMC3RkbXgtZG9tYWluMRwwGgYDVQQL
DBNzdWJkb21haW4uem9uZS5yb290MDMGCCoDBAUGBwgJAQH/BCQwIgIBARYJem9u
ZS5yb290FhJodHRwczovL21yc1VybC9hcGkwCwYJKoZIhvcNAQELA4IBAQBbHOHm
YDXwbTXOlJfRnjU6re7VOMtah5KaP5Bp6R2BvB+Cjb3oSh+q8XJyzj+/L03GXutx
IcL1hc438abBNACeGUHrz/LoOSRKbJqjtpE0PakprWfiIcAzm2Oa2kKIpHwnLLJi
xJDl8zizTHNs/vg6b+U5fffE2pDmRNq3WgnJ2F8DFJOaIzyLpKiP2K1CbFemF7FM
QlPyKbLKRrakKWNk5k4x/s1S0Xk60TlZYITsXbzVNGCxqFtPljx6zzLac+fgTjT/
peozf80raYL6BSHPiHd41IF6kJVWtwQKjOlpweJi5NJ79CId7Iajgd3umBkPfHhF
Xl3Y4brcI+YO1IuX
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEdjCCA2CgAwIBAgIBATALBgkqhkiG9w0BAQswfjELMAkGA1UEBhMCQ0gxDDAK
BgNVBAcMA1p1ZzESMBAGA1UECgwJbXljb21wYW55MQswCQYDVQQLDAJJVDEcMBoG
CSqGSIb3DQEJARYNcGprQGdtYWlsLmNvbTETMBEGA1UEFBMKMDQxNzEwMDAwMDEN
MAsGA1UEAwwEbmFtZTAeFw0xNTAxMDYyMTA0NTFaFw0yNTAxMDYyMTA0NTFaMH4x
CzAJBgNVBAYTAkNIMQwwCgYDVQQHDANadWcxEjAQBgNVBAoMCW15Y29tcGFueTEL
MAkGA1UECwwCSVQxHDAaBgkqhkiG9w0BCQEWDXBqa0BnbWFpbC5jb20xEzARBgNV
BBQTCjA0MTcxMDAwMDAxDTALBgNVBAMMBG5hbWUwggEiMA0GCSqGSIb3DQEBAQUA
A4IBDwAwggEKAoIBAQDIeU0yaJkmXajFANDTMa42Pj5tG8xf73NQQGmhmR828sBi
gtPS+P6kp+4BbdZejnAXalpGBXsUu9F+Y9rhDCCpCDmnXXhptqIZ/q+0dMf5olDv
mt0jCH9S12SK6XUvaycIG2lmcXZyZ6q2sqsRG/ItLx9i2zlQO1t/+9WfNrBZ6VZM
bjrLgSsWuNzQGHBP/QwiURt600o0nIlNf1ul2gjckUs16CitDIjc+h/KUwaU4Mfa
iP18GwCgoxrVUOAvTD+CZwQHh1o8tKVWqO3iBLjppmqq5/i4nbphuRCJGctu9t7o
95LCm5rvu2y1CIRDxGTLr68pqfJDpTOcNZj/ODihAgMBAAGjggEBMIH+MBIGA1Ud
EwEB/wQIMAYBAf8CAQEwHwYDVR0jBBgwFoAUl723agDQcz1u5QdUN3yXKqSWy7kw
HQYDVR0OBBYEFJe9t2oA0HM9buUHVDd8lyqklsu5MAsGA1UdDwQEAwIChDBmBgNV
HR4BAf8EXDBaoFgwVqRUMFIxCzAJBgNVBAYTAkNIMQwwCgYDVQQHDANadWcxEjAQ
BgNVBAoMCW15Y29tcGFueTELMAkGA1UECwwCSVQxFDASBgNVBAsMC3RkbXgtZG9t
YWluMDMGCCoDBAUGBwgJAQH/BCQwIgIBARYJem9uZS5yb290FhJodHRwczovL21y
c1VybC9hcGkwCwYJKoZIhvcNAQELA4IBAQAvfSXsb0T8S/yYDanAS5ldIvJVCKoQ
mSjqeNQDd+F47dafhA62hsQMyaFLhiALg19XKQ1K03kOC/dms9Yh1/U+J9sq3H3t
Od1BNh3tso2HG606HyanICSVRq25A7kgF+zA34jZSrohUPt4rTsK8k78Zx4dbNFq
Dm+WYAqluwQzX8joSllMXGys+tlsBiChlQhhiBCYw8nLP+U3umhbjeXOyrFgZoKr
CC5vfFpxzJKa5m6G3Q4usp+EhwgaKAvwLAEq/QWbj9BGGnK8532ZltCa+ybuQM7m
LG2eEANW1TOJreTTKkVQDqgUFrVU16ID+8FN/Gs0Gb+Lr/jhcJACPlib
-----END CERTIFICATE-----', sha1fingerprint = '6d35de92d53686bb89dd0f80a31a726560c9c8ea' where sha1fingerprint='b1aa7ec92eac859ff866706d850bae64f6d262ca';


