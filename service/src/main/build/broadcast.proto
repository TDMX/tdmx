// Copyright (c) 2015 Peter Klauser

option java_package = "org.tdmx.server.pcs.protobuf";
option java_outer_classname = "Broadcast";

message BroadcastMessage {
	optional CacheInvalidationMessage cacheInvalidation = 1;
	optional RelayMessage relay = 2;
}

message CacheInvalidationMessage {
	optional string id = 1;
	optional string cacheKey = 2;
}

message AttributeValue {
	enum AttributeId {
	  AccountZoneId = 0;
	  ZoneId = 1;
	  DomainId = 2;
	  ChannelId = 3;
	  TemporaryChannelId = 4;
	  ServiceId = 5;
	  AddressId = 6;
	}
	required AttributeId name = 1;
	optional int64 value = 2;
}

message Channel {
	optional string originLocalName = 1;
	optional string originDomain = 2;
	optional string destinationLocalName = 3;
	optional string destinationDomain = 4;
	optional string destinationService = 5;
}

message RelayMessage {
	enum RelayType {
	  Message = 0;
	  ChannelAuthorization = 1;
	  DestinationSession = 2;
	  DeliveryReply = 3;
	}
	optional RelayType relayType = 1;
	optional Channel channel = 2;
	repeated AttributeValue attribute = 3;
}

