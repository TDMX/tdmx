<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-4.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-4.0.xsd">


	<bean id="tdmx.server.cli.ServerCommandDescriptionFactory" class="org.tdmx.core.cli.CommandDescriptorFactoryImpl">
		<constructor-arg>
			<array>
				<value>org.tdmx.server.cli.account.CreateAccount</value>
				<value>org.tdmx.server.cli.account.SearchAccount</value>
			</array>
		</constructor-arg>
	</bean>
	
	<bean id="tdmx.server.cli.ServerCommandExecutableFactory" class="org.tdmx.server.cli.BeanLookupCommandExecutableFactoryImpl" init-method="init">
		<property name="commandDescriptorFactory" ref="tdmx.server.cli.ServerCommandDescriptionFactory"/>
		<property name="commandNameRefMap">
			<map key-type="java.lang.String" value-type="java.lang.String">
				<entry key="account:create" value="tdmx.server.cli.cmd.CreateAccount"/>
				<entry key="account:search" value="tdmx.server.cli.cmd.SearchAccount"/>
			</map>
		</property>
	</bean>
	
	<bean id="tdmx.server.cli.ServerCliRunner" class="org.tdmx.core.cli.CliRunnerImpl">
		<property name="commandExecutableFactory" ref="tdmx.server.cli.ServerCommandExecutableFactory"/>
	</bean>
	
	<bean id="tdmx.server.cli.ServerAdminCLI" class="org.tdmx.core.cli.CliParser">
		<property name="commandDescriptorFactory" ref="tdmx.server.cli.ServerCommandDescriptionFactory"/>
		<property name="cliRunner" ref="tdmx.server.cli.ServerCliRunner"/>
	</bean>

	<bean id="tdmx.server.cli.cmd.AbstractCommand" class="org.tdmx.server.cli.cmd.AbstractCliCommand" abstract="true">
		<property name="sas" ref="rs.SAS"/>
	</bean>

	<bean id="tdmx.server.cli.cmd.CreateAccount" class="org.tdmx.server.cli.account.CreateAccount" parent="tdmx.server.cli.cmd.AbstractCommand" scope="prototype">
	</bean>
	<bean id="tdmx.server.cli.cmd.SearchAccount" class="org.tdmx.server.cli.account.SearchAccount" parent="tdmx.server.cli.cmd.AbstractCommand" scope="prototype">
	</bean>
</beans>